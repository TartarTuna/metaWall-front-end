import{r as d,a as r,d as i,b as u,P as m,f as p,Q as _,L as w,S as v,o as a,$ as B,a0 as N,a1 as V,i as P}from"./index.750991ee.js";import{a as $}from"./post.2a1a06e1.js";import{E as f,_ as b}from"./PostCard.dc4fe7dd.js";import"./like.ff68e6ae.js";import"./day.22152a0f.js";import"./_commonjsHelpers.4e997714.js";import"./image.dbbbd8ec.js";const q={class:"container mt-7 px-lg-12 mb-12"},U={class:"row"},F={class:"col-lg-7"},M=P("\u8F09\u5165\u4E2D... "),Q=P("\u6B64\u8CBC\u6587\u5DF2\u522A\u9664 "),T={key:0,class:"ps-0"},R={name:"SinglePost",props:{userId:{type:String,required:!0},postId:{type:String,required:!0}},setup(k){const l=k,e=d(null),g=d(null),c=d(!1),I=async s=>{const{data:t}=await $(s);return t};(async()=>{if(l){const t=(await I(l.userId)).filter(o=>o._id===l.postId);e.value=t[0],g.value=t}})();const h=s=>{e.value.likes.push({_id:v.value._id})},x=s=>{const t=e.value.likes.findIndex(o=>o._id===v.value._id);~t&&e.value.likes.splice(t,1)},y=({postId:s,comment:t})=>{e.value.comments.push(t)},C=({postId:s,commentId:t,content:o})=>{const n=e.value.comments.find(L=>L._id===t);n.content=o},S=({postId:s,commentId:t})=>{const o=e.value.comments.findIndex(n=>n._id===t);~o&&e.value.comments.splice(o,1)},D=({postId:s,content:t,image:o,tag:n})=>{e.value.content=t,e.value.tag=n,e.value.image=o},E=s=>{e.value=null,c.value=!0};return(s,t)=>(a(),r(_,null,[i(B),u("section",q,[u("div",U,[u("div",F,[!e.value&&!c.value?(a(),m(f,{key:0},{default:p(()=>[M]),_:1})):!e.value&&c.value?(a(),m(f,{key:1},{default:p(()=>[Q]),_:1})):(a(),r(_,{key:2},[e.value?(a(),r("ul",T,[i(b,{post:e.value,onPostLike:h,onDeleteLike:x,onPostComment:y,onEditComment:C,onDeleteComment:S,onEditPost:D,onDeletePost:E},null,8,["post"])])):w("",!0)],64))]),i(N)])]),i(V)],64))}};export{R as default};
